<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gacha.mapper.CommentaryMapper">
	<delete id="deleteCommentaryByWriter" parameterType="String">
		delete from commentary where writer=${writer}
	</delete>
	<delete id="deleteCommentaryByPostId" parameterType="Integer">
			delete from commentary where post_id=${post_id}
	</delete>
	<delete id="deleteCommentaryByCode" parameterType="Integer">
		delete from commentary where code=${code}
	</delete>
	



	<update id="updateCommentary" parameterType="gacha.model.Commentary">
	update commentary set content=#{content},write_date=sysdate where code=#{code}
	</update>
	<select id="getCommentaryByCode" parameterType="Integer" resultType="gacha.model.Commentary">
	select code,writer,content,post_id from commentary where code=#{code}
	</select>
	<select id="getCommentListByPost" parameterType="Integer" resultType="gacha.model.Commentary">
	select code,post_id,content,writer,write_date from commentary where post_id=#{post_id} order by write_date desc 
	</select>
    <!-- ðŸ“Œ ì „ì²´ ëŒ“ê¸€ ê°¯ìˆ˜ ë¦¬í„´, code ê°±ì‹  ì˜ˆì • -->
	<select id="getCommentaryMax" resultType="Integer">
	select count(*) from commentary
	</select>
    <!-- ðŸ“Œ ëŒ“ê¸€ ìž‘ì„± ì •ë³´ ìž…ë ¥ -->
    <insert id="putComment" parameterType="gacha.model.Commentary">
        INSERT INTO commentary VALUES (#{code}, #{post_id}, #{writer},#{content}, SYSDATE)
    </insert>
    
</mapper>